{"version":3,"file":"imageboardrenderer.min.js","sources":["../src/imageboardrenderer.js"],"sourcesContent":["/**\n *\n * @param {string} cmid\n * @param {string} canvaswidth\n * @param {string} canvasheight\n * @param {array} images\n */\nexport const init = (cmid, canvaswidth, canvasheight, images) => {\n    docReady(createimageboard(cmid, canvaswidth, canvasheight, images));\n};\n\nconst docReady = (callback) => {\n    if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n        setTimeout(callback, 1);\n    } else {\n        document.addEventListener('DOMContentLoaded', callback);\n    }\n};\n\n\nconst createimageboard = (cmid, canvaswidth, canvasheight, images) => {\n    drawthecanvas(cmid, canvaswidth, canvasheight);\n    drawAllImages(cmid, images);\n};\n\n\n/**\n * This function draws the canvas for the unilabel subplugin.\n * There can be more than one canvas on a page so the id {{cmid}} is needed.\n * An eventlistener listens to resize of the page and if width is not enought\n * then the canvas is rezised to 90%.\n *\n * @param {string} cmid\n * @param {string} canvaswidth\n * @param {string} canvasheight\n */\nfunction drawthecanvas(cmid, canvaswidth, canvasheight) {\n    ////alert(\"drawthecanvas     cmid=\" + cmid + \"    canvaswidth=\"+canvaswidth + \"    canvasheight=\"+canvasheight);\n    const myCanvas = document.getElementById(\"unilabeltype-imageboard-canvas-\" + cmid);\n    const myContext = myCanvas.getContext(\"2d\");\n    var newcanvaswidth = 500;\n    var widthfactor = 1;\n    var newcanvasheight = 500;\n    if ( canvaswidth > getWidth() ) {\n        newcanvaswidth = getWidth() * 0.90;\n        widthfactor = newcanvaswidth / canvaswidth;\n        newcanvasheight = canvasheight * widthfactor ;\n        myContext.canvas.width = newcanvaswidth;\n        myContext.canvas.height = newcanvasheight;\n    } else {\n        myContext.canvas.width = canvaswidth;\n        myContext.canvas.height = canvasheight;\n    }\n    window.addEventListener(\"resize\", function() {\n        if (canvaswidth > getWidth()) {\n            newcanvaswidth = getWidth() * 0.90;\n            widthfactor =  newcanvaswidth / canvaswidth;\n            newcanvasheight = canvasheight * widthfactor ;\n            myContext.canvas.width = newcanvaswidth;\n            myContext.canvas.height = newcanvasheight;\n        } else {\n        }\n    }, false);\n}\n\n\n/**\n * Helper function to get the width of the usable browserarea.\n *\n * @returns {*|number}\n */\nfunction getWidth() {\n    if (self.innerWidth) {\n        return self.innerWidth;\n    }\n    if (document.documentElement && document.documentElement.clientWidth) {\n        return document.documentElement.clientWidth;\n    }\n    if (document.body) {\n        return document.body.clientWidth;\n    }\n}\n\n/**\n * @param {string} cmid\n * @param {array} images\n */\nfunction drawAllImages(cmid, images) {\n    alert(\"1. drawAllImages images=\" +images);\n    Array.prototype.forEach(images, image => {\n        drawOneImage(cmid,image);\n    });\n\n}\n\n/**\n * @param {string} cmid\n * @param {img} image\n */\nfunction drawOneImage(cmid, image) {\n    alert('1. drawOneImage');\n    let dummy = image['id'];\n    alert('dummy=' + dummy);\n    alert(\"xxxxxdrawOneimage       cmid=\" + cmid + \" image=\" + image);\n\n}"],"names":["cmid","canvaswidth","canvasheight","images","docReady","createimageboard","callback","document","readyState","setTimeout","addEventListener","myContext","getElementById","getContext","newcanvaswidth","newcanvasheight","getWidth","canvas","width","height","window","drawthecanvas","alert","Array","prototype","forEach","image","dummy","drawOneImage","drawAllImages","self","innerWidth","documentElement","clientWidth","body"],"mappings":"+KAOoB,CAACA,KAAMC,YAAaC,aAAcC,UAClDC,SAASC,iBAAiBL,KAAMC,YAAaC,aAAcC,gBAGzDC,SAAYE,WACc,aAAxBC,SAASC,YAAqD,gBAAxBD,SAASC,WAC/CC,WAAWH,SAAU,GAErBC,SAASG,iBAAiB,mBAAoBJ,WAKhDD,iBAAmB,CAACL,KAAMC,YAAaC,aAAcC,oBAgBpCH,KAAMC,YAAaC,oBAGhCS,UADWJ,SAASK,eAAe,kCAAoCZ,MAClDa,WAAW,UAClCC,eAAiB,IAEjBC,gBAAkB,IACjBd,YAAce,YACfF,eAA8B,GAAbE,WAEjBD,gBAAkBb,cADJY,eAAiBb,aAE/BU,UAAUM,OAAOC,MAAQJ,eACzBH,UAAUM,OAAOE,OAASJ,kBAE1BJ,UAAUM,OAAOC,MAAQjB,YACzBU,UAAUM,OAAOE,OAASjB,cAE9BkB,OAAOV,iBAAiB,UAAU,WAC1BT,YAAce,aACdF,eAA8B,GAAbE,WAEjBD,gBAAkBb,cADHY,eAAiBb,aAEhCU,UAAUM,OAAOC,MAAQJ,eACzBH,UAAUM,OAAOE,OAASJ,oBAG/B,GAzCHM,CAAcrB,KAAMC,YAAaC,uBAkEdF,KAAMG,QACzBmB,MAAM,2BAA4BnB,QAClCoB,MAAMC,UAAUC,QAAQtB,QAAQuB,kBAUd1B,KAAM0B,OACxBJ,MAAM,uBACFK,MAAQD,MAAK,GACjBJ,MAAM,SAAWK,OACjBL,MAAM,gCAAkCtB,KAAO,UAAY0B,OAbvDE,CAAa5B,KAAK0B,UApEtBG,CAAc7B,KAAMG,kBAiDfa,kBACDc,KAAKC,WACED,KAAKC,WAEZxB,SAASyB,iBAAmBzB,SAASyB,gBAAgBC,YAC9C1B,SAASyB,gBAAgBC,YAEhC1B,SAAS2B,KACF3B,SAAS2B,KAAKD"}